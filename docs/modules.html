<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waspy Module Development Board</title>
    <link rel="icon" href="../assets/logo.png" type="image/png">
    <link rel="stylesheet" href="modules-style.css">
</head>
<body>
    <div class="controls">
        <button class="control-btn download-btn" onclick="downloadPNG()" title="Download PNG" id="download-btn">üì∏</button>
        <button class="control-btn theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">üåô</button>
    </div>

    <div class="container">
        <header class="header">
            <nav class="header-nav" style="margin-bottom: 20px; display: flex; gap: 24px; font-size: 14px;">
                <a href="index.html" style="color: #8b949e; text-decoration: none;">Home</a>
                <a href="modules.html" style="color: #79c0ff; text-decoration: none; font-weight: 500;">Modules</a>
                <a href="changelog.html" style="color: #8b949e; text-decoration: none;">Changelog</a>
            </nav>
            <h1 class="title">Waspy Development Board</h1>
            <p class="subtitle">Python to WebAssembly Compiler - Module Development Status</p>
        </header>

        <div class="stats" id="stats"></div>

        <div class="kanban-board" id="kanban-board">
            <div class="kanban-column column-done" id="done-column-wrapper">
                <div class="column-header">
                    <div class="column-title">
                        ‚úÖ Completed
                        <span class="column-count" id="done-count-badge">0</span>
                    </div>
                    <div class="column-subtitle">Fully implemented and working</div>
                </div>
                <div class="column-content" id="done-column"></div>
            </div>

            <div class="kanban-column column-progress" id="progress-column-wrapper">
                <div class="column-header">
                    <div class="column-title">
                        üîÑ In Progress
                        <span class="column-count" id="progress-count-badge">0</span>
                    </div>
                    <div class="column-subtitle">Partially implemented features</div>
                </div>
                <div class="column-content" id="progress-column"></div>
            </div>

            <div class="kanban-column column-todo" id="todo-column-wrapper">
                <div class="column-header">
                    <div class="column-title">
                        üìã Todo
                        <span class="column-count" id="todo-count-badge">0</span>
                    </div>
                    <div class="column-subtitle">Planned for future development</div>
                </div>
                <div class="column-content" id="todo-column"></div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-links">
                <a href="https://github.com/anistark/waspy" class="footer-link">GitHub Repository</a>
                <!-- <a href="#" class="footer-link">Documentation</a> -->
                <a href="https://github.com/anistark/waspy/blob/main/CONTRIBUTING.md" class="footer-link">Contributing Guide</a>
                <a href="https://github.com/anistark/waspy/issues" class="footer-link">Issue Tracker</a>
            </div>
            <p class="footer-text">¬© 2025 Waspy Project. Built with ‚ù§Ô∏è for the Python community.</p>
        </footer>
    </div>

    <script>
        // Module data
        const moduleData = {
            // ‚úÖ FULLY COMPLETED MODULES
            arithmetic: {
                title: "ARITHMETIC",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "All operators (+, -, *, /, %, //, **)", status: "done", version: "0.1.0" },
                    { name: "Type coercion (int/float)", status: "done", version: "0.1.0" },
                    { name: "Bitwise operations (&, |, ^, <<, >>, ~)", status: "done", version: "0.1.0" },
                    { name: "Unary operations (-, +, not)", status: "done", version: "0.1.0" }
                ]
            },
            controlFlow: {
                title: "CONTROL FLOW",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "if/elif/else statements", status: "done", version: "0.1.0" },
                    { name: "while loops", status: "done", version: "0.1.0" },
                    { name: "for loops with list/string iteration", status: "done", version: "0.7.0" },
                    { name: "try/except/finally exception handling", status: "done", version: "0.7.0" },
                    { name: "with statements and context managers", status: "done", version: "0.7.0" },
                    { name: "Comparison operations (==, !=, <, <=, >, >=)", status: "done", version: "0.1.0" },
                    { name: "Boolean logic (and, or, not) with short-circuit", status: "done", version: "0.1.0" }
                ]
            },
            functions: {
                title: "FUNCTIONS",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "Function definitions with parameters", status: "done", version: "0.1.0" },
                    { name: "Type annotations (params & return types)", status: "done", version: "0.1.0" },
                    { name: "Function calls between compiled functions", status: "done", version: "0.1.0" },
                    { name: "Multiple functions per module", status: "done", version: "0.1.0" }
                ]
            },
            typeSystem: {
                title: "TYPE SYSTEM",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "Basic types (int, float, bool)", status: "done", version: "0.1.0" },
                    { name: "Generic types (List[T], Dict[K,V], Tuple[T,...])", status: "done", version: "0.1.0" },
                    { name: "Union/Optional types", status: "done", version: "0.1.0" },
                    { name: "Custom class type annotations", status: "done", version: "0.1.0" }
                ]
            },
            variables: {
                title: "VARIABLES & ASSIGNMENT",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "Variable declarations and assignments", status: "done", version: "0.1.0" },
                    { name: "Augmented assignment (+=, -=, *=, etc.)", status: "done", version: "0.1.0" },
                    { name: "Attribute assignment (obj.attr = value)", status: "done", version: "0.1.0" },
                    { name: "Type inference from usage", status: "done", version: "0.1.0" }
                ]
            },
            decorators: {
                title: "DECORATORS",
                status: "done",
                version: "0.6.0",
                features: [
                    { name: "@memoize decorator (caching)", status: "done", version: "0.6.0" },
                    { name: "@debug decorator (logging)", status: "done", version: "0.6.0" },
                    { name: "@timer decorator (performance)", status: "done", version: "0.6.0" },
                    { name: "Custom decorator registration", status: "done", version: "0.6.0" }
                ]
            },
            projectMgmt: {
                title: "PROJECT MANAGEMENT",
                status: "done",
                version: "0.5.0",
                features: [
                    { name: "Multi-file compilation to single WASM", status: "done", version: "0.5.0" },
                    { name: "Dependency analysis & circular detection", status: "done", version: "0.5.0" },
                    { name: "Entry point detection (__main__.py)", status: "done", version: "0.5.0" },
                    { name: "Config parsing (setup.py, pyproject.toml)", status: "done", version: "0.5.0" }
                ]
            },
            optimization: {
                title: "OPTIMIZATION",
                status: "done",
                version: "0.1.0",
                features: [
                    { name: "WebAssembly optimization (Binaryen)", status: "done", version: "0.1.0" },
                    { name: "Compiler options & configuration", status: "done", version: "0.1.0" },
                    { name: "Error handling with detailed messages", status: "done", version: "0.1.0" },
                    { name: "Memory layout optimization", status: "done", version: "0.1.0" }
                ]
            },

            // üîÑ PARTIALLY IMPLEMENTED MODULES
            // Note: Strings and Collections moved to DONE as of latest implementation
            strings: {
                title: "STRINGS",
                status: "done",
                version: "0.3.0",
                features: [
                    { name: "String literals, indexing, slicing, concatenation", status: "done", version: "0.3.0" },
                    { name: "Case conversion (upper, lower, capitalize, title)", status: "done", version: "0.3.0" },
                    { name: "Test methods (isdigit, isalpha, isspace, etc.) - compile-time optimized", status: "done", version: "0.3.0" },
                    { name: "Search methods (.find, .count, .startswith, .endswith)", status: "done", version: "0.3.0" },
                    { name: "Transform methods (.split, .join, .replace)", status: "done", version: "0.3.0" },
                    { name: "Layout methods (.ljust, .rjust, .center)", status: "done", version: "0.3.0" },
                    { name: ".format() and % formatting - compile-time for constants", status: "done", version: "0.3.0" },
                    { name: "F-strings with JoinedStr - constant & dynamic interpolation", status: "done", version: "0.3.0" }
                ]
            },

            // üîÑ PARTIALLY IMPLEMENTED MODULES
            collections: {
                title: "COLLECTIONS",
                status: "done",
                version: "0.7.0",
                features: [
                    { name: "List literals with memory allocation [1, 2, 3]", status: "done", version: "0.7.0" },
                    { name: "List indexing (read & write) list[i] and list[i] = value", status: "done", version: "0.7.0" },
                    { name: "List methods .append(), .pop([i]), .clear(), .insert(i, v)", status: "done", version: "0.7.0" },
                    { name: "List search methods .index(v) & .count(v) with linear search", status: "done", version: "0.7.0" },
                    { name: "Dict literals with memory allocation {'key': value}", status: "done", version: "0.7.0" },
                    { name: "Dict indexing (read & write) dict[key] and dict[key] = value", status: "done", version: "0.7.0" }
                ]
            },
            classes: {
                title: "CLASSES & OOP",
                status: "done",
                version: "0.7.0",
                features: [
                    { name: "Class definitions with full WASM compilation", status: "done", version: "0.7.0" },
                    { name: "Instance method definitions with implicit self parameter", status: "done", version: "0.7.0" },
                    { name: "Object instantiation via constructor calls (ClassName(args))", status: "done", version: "0.7.0" },
                    { name: "Automatic __init__ method invocation during construction", status: "done", version: "0.7.0" },
                    { name: "Method calls with proper dispatch (obj.method())", status: "done", version: "0.7.0" },
                    { name: "Instance attribute access getter (obj.attr)", status: "done", version: "0.7.0" },
                    { name: "Instance attribute assignment setter (obj.attr = value)", status: "done", version: "0.7.0" },
                    { name: "Per-instance field storage with calculated memory offsets", status: "done", version: "0.7.0" }
                ]
            },
            advancedFlow: {
                title: "ADVANCED CONTROL FLOW",
                status: "done",
                version: "0.7.0",
                features: [
                    { name: "for loops with list/string iteration", status: "done", version: "0.7.0" },
                    { name: "try/except/finally with exception handling", status: "done", version: "0.7.0" },
                    { name: "with statements and context managers", status: "done", version: "0.7.0" },
                    { name: "Exception type matching and handlers", status: "done", version: "0.7.0" }
                ]
            },
            builtins: {
                title: "BUILT-IN FUNCTIONS",
                status: "done",
                version: "0.7.0",
                features: [
                    { name: "Type conversions (int(), float(), str(), bool())", status: "done", version: "0.4.0" },
                    { name: "len() - strings, lists, and dicts", status: "done", version: "0.7.0" },
                    { name: "print() - argument handling implemented", status: "done", version: "0.7.0" },
                    { name: "min() & max() - multiple arguments", status: "done", version: "0.7.0" },
                    { name: "sum() - iterable with start value", status: "done", version: "0.7.0" }
                ]
            },
            runtimeFeatures: {
                title: "RUNTIME FEATURES",
                status: "progress",
                version: "in-dev",
                features: [
                    { name: "Generator State Management - execution context suspension/resumption", status: "progress" },
                    { name: "Dynamic Module Loading - runtime module loading and execution", status: "progress" },
                    { name: "Closure Variable Capture Analysis - detecting and capturing closure variables", status: "progress" },
                    { name: "String Transformation in WASM - full character-by-char transformations", status: "progress" },
                    { name: "Set Hashing & Storage - proper hash table implementation for sets", status: "progress" },
                    { name: "Dictionary Index Assignment with Update - modifying dictionary values", status: "progress" }
                ]
            },

            // ‚ùå NOT YET IMPLEMENTED
            webInterop: {
                title: "WEB INTEROP",
                status: "todo",
                features: [
                    { name: "JavaScript bridge & value conversion", status: "todo" },
                    { name: "DOM manipulation APIs", status: "todo" },
                    { name: "Event handling system", status: "todo" },
                    { name: "HTTP requests (fetch API)", status: "todo" }
                ]
            },
            async: {
                title: "ASYNC/AWAIT",
                status: "todo",
                features: [
                    { name: "Promise object representation", status: "todo" },
                    { name: "async/await syntax support", status: "todo" },
                    { name: "Asynchronous function execution", status: "todo" },
                    { name: "Concurrent task management", status: "todo" }
                ]
            },
            stdlib: {
                title: "STANDARD LIBRARY",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "sys module - attributes (argv, platform, version, maxsize, stdin/stdout/stderr, path)", status: "done", version: "0.8.0" },
                    { name: "os module - attributes & functions (name, sep, pathsep, linesep, devnull, curdir, pardir, extsep, environ)", status: "done", version: "0.8.0" },
                    { name: "os module - callable functions (getcwd(), getenv(), getpid(), urandom()) - fully functional", status: "done", version: "unreleased" },
                    { name: "os.path submodule - callable functions (join(), exists(), isfile(), isdir(), basename(), dirname(), abspath(), split(), splitext()) - fully functional", status: "done", version: "unreleased" },
                    { name: "math module (pi, e, tau, inf, nan, sqrt, sin, cos, tan, asin, acos, atan, atan2, sinh, cosh, tanh, exp, log, log10, log2, pow, floor, ceil, trunc, round, abs, fabs, copysign, fmod, remainder, degrees, radians, hypot, factorial, gcd, isnan, isinf, isfinite)", status: "done", version: "0.8.0" },
                    { name: "random module (random, randint, randrange, uniform, choice, shuffle, sample, seed, getrandbits, gauss, normalvariate, expovariate)", status: "done", version: "0.8.0" },
                    { name: "json module (loads, dumps, load, dump, JSONEncoder, JSONDecoder) - runtime implementation", status: "done", version: "unreleased" },
                    { name: "re module (compile, search, match, fullmatch, findall, finditer, split, sub, subn, escape, purge, IGNORECASE, MULTILINE, DOTALL, VERBOSE, ASCII)", status: "done", version: "0.8.0" },
                    { name: "datetime module (datetime, date, time, timedelta, timezone, tzinfo, now, today, fromtimestamp, fromisoformat, strftime, strptime, replace, timestamp, isoformat, weekday, isoweekday, MINYEAR, MAXYEAR)", status: "done", version: "0.8.0" },
                    { name: "collections module (namedtuple, deque, Counter, OrderedDict, defaultdict, ChainMap, UserDict, UserList, UserString)", status: "done", version: "0.8.0" },
                    { name: "itertools module (count, cycle, repeat, chain, compress, dropwhile, filterfalse, groupby, islice, starmap, takewhile, tee, zip_longest, product, permutations, combinations, combinations_with_replacement, accumulate, batched, pairwise)", status: "done", version: "0.8.0" },
                    { name: "functools module (reduce, partial, partialmethod, wraps, update_wrapper, total_ordering, cmp_to_key, lru_cache, cache, cached_property, singledispatch, singledispatchmethod)", status: "done", version: "0.8.0" }
                ]
            },
            comprehensions: {
                title: "COMPREHENSIONS",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "List comprehensions ([x for x in list])", status: "done", version: "0.8.0" },
                    { name: "List comprehension filters ([x for x in list if condition])", status: "done", version: "0.8.0" },
                    { name: "Dict comprehensions ({k: v for k, v in items})", status: "todo" },
                    { name: "Set comprehensions ({x for x in list})", status: "todo" },
                    { name: "Generator expressions (x for x in list)", status: "todo" }
                ]
            },
            functional: {
                title: "FUNCTIONAL PROGRAMMING",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "Lambda functions (lambda x: x + 1)", status: "done", version: "0.8.0" },
                    { name: "Closures with variable capture", status: "done", version: "0.8.0" },
                    { name: "Higher-order functions (passing functions as arguments)", status: "done", version: "0.8.0" },
                    { name: "Callable type tracking for function objects", status: "done", version: "0.8.0" }
                ]
            },
            generators: {
                title: "GENERATORS & ITERATORS",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "yield statement & generator functions", status: "done", version: "0.8.0" },
                    { name: "Generator type tracking (Generator[T])", status: "done", version: "0.8.0" },
                    { name: "Iterator protocol (__iter__, __next__)", status: "todo" },
                    { name: "range() function implementation - all variants", status: "done", version: "0.8.0" },
                    { name: "for loop iteration over ranges with step support", status: "done", version: "0.8.0" }
                ]
            },
            imports: {
                title: "IMPORT SYSTEM",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "Import statement parsing & IR generation", status: "done", version: "0.8.0" },
                    { name: "From-import with named imports", status: "done", version: "0.8.0" },
                    { name: "Star imports detection (from X import *)", status: "done", version: "0.8.0" },
                    { name: "Conditional imports in try/except blocks", status: "done", version: "0.8.0" },
                    { name: "Dynamic imports (__import__, importlib)", status: "done", version: "0.8.0" },
                    { name: "Module execution and loading", status: "done", version: "0.8.0" }
                ]
            },
            errorHandling: {
                title: "EXCEPTION HANDLING",
                status: "done",
                version: "0.7.0",
                features: [
                    { name: "Exception throwing (raise statements)", status: "done", version: "0.7.0" },
                    { name: "Exception catching by type", status: "done", version: "0.7.0" },
                    { name: "Built-in exception types (ZeroDivisionError, ValueError, etc.)", status: "done", version: "0.7.0" },
                    { name: "Exception propagation & finally blocks", status: "done", version: "0.7.0" }
                ]
            },
            advancedTypes: {
                title: "ADVANCED DATA TYPES",
                status: "done",
                version: "0.8.0",
                features: [
                    { name: "Bytes type & binary data handling", status: "done", version: "0.7.0" },
                    { name: "Bytes literals, indexing, slicing, concatenation", status: "done", version: "0.7.0" },
                    { name: "Set type ({1, 2, 3}) & literals", status: "done", version: "0.7.0" },
                    { name: "Empty sets with type annotations", status: "done", version: "0.7.0" },
                    { name: "Set operations (add, remove, union, intersection)", status: "todo" },
                    { name: "Tuple literals with variable expressions (a, b, c)", status: "done", version: "0.8.0" },
                    { name: "Tuple indexing with type tracking", status: "done", version: "0.8.0" },
                    { name: "Heterogeneous tuples with mixed types", status: "done", version: "0.8.0" },
                    { name: "Tuple unpacking & assignment (a, b = (1, 2))", status: "done", version: "0.8.0" },
                    { name: "Tuple methods (.index, .count)", status: "done", version: "0.8.0" },
                    { name: "Named tuples - namedtuple() factory", status: "done", version: "0.8.0" },
                    { name: "String formatting (.format() & % & f-strings)", status: "done" }
                ]
            },
            advancedOOP: {
                title: "ADVANCED OOP",
                status: "todo",
                features: [
                    { name: "Multiple inheritance & method resolution", status: "todo" },
                    { name: "Metaclasses & class creation", status: "todo" },
                    { name: "Property decorators (@property, @setter)", status: "todo" },
                    { name: "Static methods (@staticmethod, @classmethod)", status: "todo" }
                ]
            },
            memory: {
                title: "MEMORY MANAGEMENT",
                status: "todo",
                features: [
                    { name: "Garbage collection system", status: "todo" },
                    { name: "Reference counting & leak prevention", status: "todo" },
                    { name: "Memory pools for efficient allocation", status: "todo" },
                    { name: "WASM memory optimization", status: "todo" }
                ]
            },
            graphics: {
                title: "GRAPHICS & CANVAS",
                status: "todo",
                features: [
                    { name: "Canvas API (2D drawing)", status: "todo" },
                    { name: "WebGL support (3D graphics)", status: "todo" },
                    { name: "Animation & rendering loops", status: "todo" },
                    { name: "Image manipulation & processing", status: "todo" }
                ]
            }
        };

        // UI State
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        // Initialize theme
        function initTheme() {
            if (isDarkMode) {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
            }
        }

        // Toggle theme
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            
            if (isDarkMode) {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
            } else {
                document.documentElement.removeAttribute('data-theme');
                document.querySelector('.theme-toggle').textContent = 'üåô';
            }
        }

        // Download PNG function
        async function downloadPNG() {
            const downloadBtn = document.getElementById('download-btn');
            const originalText = downloadBtn.textContent;
            
            try {
                // Disable button and show loading state
                downloadBtn.disabled = true;
                downloadBtn.textContent = '‚è≥';
                
                // Import html2canvas dynamically
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                document.head.appendChild(script);
                
                await new Promise((resolve, reject) => {
                    script.onload = resolve;
                    script.onerror = reject;
                });

                // Apply snapshot mode for landscape layout
                document.body.classList.add('snapshot-mode');
                
                // Hide controls temporarily for cleaner screenshot
                const controls = document.querySelector('.controls');
                controls.style.display = 'none';
                
                // Wait for layout to settle and animations to complete
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // Force all cards to be visible for snapshot
                const cards = document.querySelectorAll('.module-card');
                cards.forEach(card => {
                    card.classList.add('visible');
                    const progressFill = card.querySelector('.progress-fill');
                    if (progressFill && progressFill.dataset.width) {
                        progressFill.style.width = progressFill.dataset.width;
                    }
                });
                
                // Calculate optimal dimensions for landscape
                const container = document.querySelector('.container');
                const containerRect = container.getBoundingClientRect();
                
                // Capture the screenshot with landscape-optimized settings
                const canvas = await html2canvas(container, {
                    backgroundColor: isDarkMode ? '#0f172a' : '#ffffff',
                    scale: 1.5, // Good quality without being too large
                    useCORS: true,
                    allowTaint: true,
                    width: Math.max(1600, containerRect.width),
                    height: containerRect.height,
                    scrollX: 0,
                    scrollY: 0,
                    removeContainer: false
                });
                
                // Remove snapshot mode and show controls again
                document.body.classList.remove('snapshot-mode');
                controls.style.display = 'flex';
                
                // Create download link
                const link = document.createElement('a');
                const timestamp = new Date().toISOString().split('T')[0];
                const theme = isDarkMode ? 'dark' : 'light';
                link.download = `waspy-kanban-board-${timestamp}-${theme}.png`;
                link.href = canvas.toDataURL('image/png', 0.9);
                
                // Trigger download
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Success feedback
                downloadBtn.textContent = '‚úÖ';
                setTimeout(() => {
                    downloadBtn.textContent = originalText;
                    downloadBtn.disabled = false;
                }, 1500);
                
            } catch (error) {
                console.error('Download failed:', error);
                
                // Clean up on error
                document.body.classList.remove('snapshot-mode');
                const controls = document.querySelector('.controls');
                controls.style.display = 'flex';
                
                // Error feedback
                downloadBtn.textContent = '‚ùå';
                setTimeout(() => {
                    downloadBtn.textContent = originalText;
                    downloadBtn.disabled = false;
                }, 1500);
            }
        }

        // Calculate statistics
        function calculateStats() {
            let done = 0, progress = 0, todo = 0;
            
            Object.values(moduleData).forEach(module => {
                switch(module.status) {
                    case 'done': done++; break;
                    case 'progress': progress++; break;
                    case 'todo': todo++; break;
                }
            });

            const total = done + progress + todo;
            const completionRate = Math.round((done / total) * 100);

            return { done, progress, todo, total, completionRate };
        }

        // Render statistics
        function renderStats() {
            const stats = calculateStats();
            const statsContainer = document.getElementById('stats');
            
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number done" id="done-count">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number progress" id="progress-count">0</div>
                    <div class="stat-label">In Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number todo" id="todo-count">0</div>
                    <div class="stat-label">Todo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number total" id="completion-rate">0%</div>
                    <div class="stat-label">Complete</div>
                </div>
            `;

            // Update column badges
            document.getElementById('done-count-badge').textContent = stats.done;
            document.getElementById('progress-count-badge').textContent = stats.progress;
            document.getElementById('todo-count-badge').textContent = stats.todo;

            // Animate counters
            setTimeout(() => {
                animateCounter('done-count', stats.done);
                animateCounter('progress-count', stats.progress);
                animateCounter('todo-count', stats.todo);
                animateCounter('completion-rate', stats.completionRate, '%');
            }, 300);
        }

        // Animate counter
        function animateCounter(elementId, targetValue, suffix = '') {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const startValue = 0;
            const duration = 1000;
            const startTime = performance.now();

            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const currentValue = Math.round(startValue + (targetValue - startValue) * easeOut);
                
                element.textContent = currentValue + suffix;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }

            requestAnimationFrame(updateCounter);
        }

        // Get status icon
        function getStatusIcon(status) {
            switch(status) {
                case 'done': return '‚úÖ';
                case 'progress': return 'üîÑ';
                case 'todo': return '‚ùå';
                default: return '‚ùì';
            }
        }

        // Get status label
        function getStatusLabel(status) {
            switch(status) {
                case 'done': return 'Completed';
                case 'progress': return 'In Progress';
                case 'todo': return 'Todo';
                default: return 'Unknown';
            }
        }

        // Calculate module progress percentage
        function calculateModuleProgress(module) {
            const total = module.features.length;
            let completed = 0;
            let partial = 0;

            module.features.forEach(feature => {
                if (feature.status === 'done') {
                    completed++;
                } else if (feature.status === 'progress') {
                    partial += 0.5;
                }
            });

            return Math.round(((completed + partial) / total) * 100);
        }

        // Create module card
        function createModuleCard(moduleKey, module) {
            const progress = calculateModuleProgress(module);
            
            return `
                <div class="module-card ${module.status}" data-module="${moduleKey}">
                    <div class="card-header">
                        <span class="card-title">${module.title}</span>
                        <span class="card-status">${getStatusLabel(module.status)}</span>
                    </div>
                    <ul class="feature-list">
                        ${module.features.map(feature => `
                            <li class="feature-item">
                                <span class="feature-status">${getStatusIcon(feature.status)}</span>
                                <span class="feature-text">${feature.name}</span>
                                ${feature.version && feature.version !== 'todo' ? `<span class="feature-version" title="Version introduced">${feature.version === 'Unreleased' ? 'upcoming' : feature.version}</span>` : ''}
                            </li>
                        `).join('')}
                    </ul>
                    ${module.status !== 'done' ? `
                        <div class="progress-indicator">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%" data-width="${progress}%"></div>
                            </div>
                            <div class="progress-text">${progress}% Complete</div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Render kanban board
        function renderKanbanBoard() {
            const doneColumn = document.getElementById('done-column');
            const progressColumn = document.getElementById('progress-column');
            const todoColumn = document.getElementById('todo-column');

            if (!doneColumn || !progressColumn || !todoColumn) return;

            // Clear columns
            doneColumn.innerHTML = '';
            progressColumn.innerHTML = '';
            todoColumn.innerHTML = '';

            // Group modules by status
            Object.entries(moduleData).forEach(([key, module]) => {
                const card = createModuleCard(key, module);
                
                switch(module.status) {
                    case 'done':
                        doneColumn.innerHTML += card;
                        break;
                    case 'progress':
                        progressColumn.innerHTML += card;
                        break;
                    case 'todo':
                        todoColumn.innerHTML += card;
                        break;
                }
            });

            // Animate cards and progress bars
            setTimeout(() => {
                const cards = document.querySelectorAll('.module-card');
                cards.forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('visible');
                        
                        // Animate progress bars
                        const progressFill = card.querySelector('.progress-fill');
                        if (progressFill) {
                            setTimeout(() => {
                                progressFill.style.width = progressFill.dataset.width;
                            }, 300);
                        }
                    }, index * 100);
                });
            }, 200);
        }

        // Adjust column widths based on card count
        function adjustColumnWidths() {
            const doneCards = document.querySelectorAll('#done-column .module-card').length;
            const progressCards = document.querySelectorAll('#progress-column .module-card').length;
            const todoCards = document.querySelectorAll('#todo-column .module-card').length;

            const total = doneCards + progressCards + todoCards;
            if (total === 0) return;

            // Calculate proportional widths
            // Give minimum 1 column per section, but allow 2 for larger sections
            let doneWidth, progressWidth, todoWidth;

            if (doneCards > 8) {
                doneWidth = 2; // 2 columns for large sections
            } else {
                doneWidth = 1;
            }

            if (todoCards > 8) {
                todoWidth = 2;
            } else {
                todoWidth = 1;
            }

            progressWidth = 1; // Progress is typically small

            // Set CSS Grid template columns dynamically
            const kanbanBoard = document.getElementById('kanban-board');
            kanbanBoard.style.gridTemplateColumns = `${doneWidth}fr ${progressWidth}fr ${todoWidth}fr`;

            // Also adjust column-content grid for Completed section if it needs 2 columns
            const doneContent = document.getElementById('done-column');
            if (doneWidth === 2) {
                doneContent.style.gridTemplateColumns = 'repeat(2, 1fr)';
            } else {
                doneContent.style.gridTemplateColumns = '1fr';
            }

            // Adjust column-content grid for Todo section if it needs 2 columns
            const todoContent = document.getElementById('todo-column');
            if (todoWidth === 2) {
                todoContent.style.gridTemplateColumns = 'repeat(2, 1fr)';
            } else {
                todoContent.style.gridTemplateColumns = '1fr';
            }
        }

        // Initialize the application
        function init() {
            initTheme();
            renderStats();
            renderKanbanBoard();

            // Adjust column widths after rendering
            setTimeout(() => {
                adjustColumnWidths();
            }, 500);
        }

        // Start the app when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
